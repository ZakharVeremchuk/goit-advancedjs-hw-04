{"version":3,"file":"index.js","sources":["../src/js/simplelightbox.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport const lightbox = new SimpleLightbox('.gallery .image-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});","import axios from \"axios\";\n\nconst token = \"38994291-8fc9a2a1ed4020d28b7742733\";\nlet lastQuery;\nlet page;\n\nexport async function fetchImages(query) {\n\n    if(lastQuery !== query) {\n        lastQuery = query;\n        page = 1;\n    } else {\n        page += 1;\n    }\n\n    return await axios.get(\"https://pixabay.com/api/\", {\n        params: {\n            key: token,\n            q: query,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: page,\n            per_page: 15\n        }\n    }).then(response => response.data);\n}","// Функція для створення HTML-картки зображення\nexport function createImageCard(hit) {\n  return `\n    <li class=\"card\">\n      <a href=\"${hit.largeImageURL}\" class=\"image-link\" target=\"_blank\" rel=\"noopener\">\n        <img \n          src=\"${hit.webformatURL}\" \n          alt=\"${hit.tags}\"\n          class=\"image\"/>\n      </a>\n      <div class=\"info\">\n        <div class=\"likes\">\n          <p class=\"title\">Likes</p>\n          <p class=\"value\">${hit.likes}</p>\n        </div>\n        <div class=\"views\">\n          <p class=\"title\">Views</p>\n          <p class=\"value\">${hit.views}</p>\n        </div>\n        <div class=\"comments\">\n          <p class=\"title\">Comments</p>\n          <p class=\"value\">${hit.comments}</p>\n        </div>\n        <div class=\"downloads\">\n          <p class=\"title\">Downloads</p>\n          <p class=\"value\">${hit.downloads}</p>\n        </div>\n      </div>\n    </li>\n  `;\n}\n\n// Функція для рендеру масиву карток у галерею\nexport function renderGallery(galleryElement, hits) {\n  galleryElement.innerHTML = createCards(hits);\n}\n\nexport function addPage(galleryElement, hits) {\n  galleryElement.innerHTML += createCards(hits)\n}\n\nfunction createCards(hits) {\n  return hits.map(createImageCard).join('');\n}","import iziToast from \"izitoast\";\nimport { lightbox } from './js/simplelightbox';\nimport { fetchImages } from './js/pixabay-api';\nimport { addPage, renderGallery } from './js/render-functions';\n\nconst inputField = document.querySelector(\".searchfield\");\nconst form = document.querySelector(\".inputform\");\nconst customLoader = document.getElementById('custom-loader');\nconst loadMoreBtn = document.querySelector('.load-more-button')\nconst gallery = document.querySelector('.gallery');\nconst loadingMessage = document.getElementById('loading-message');\nlet lastQuery = '';\nlet totalHits = 0;\nlet loadedHits = 0;\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    const query = event.target.elements.searchfield.value.trim();\n    customLoader.style.display = 'block';\n\n    if (!query) {\n        customLoader.style.display = 'none';\n        iziToast.warning({\n            message: 'Please enter a search query!',\n            position: 'topRight'\n        });\n        loadingMessage.style.display = 'none';\n        return;\n    }\n    lastQuery = query;\n\n    loadingMessage.style.display = 'block';\n    gallery.innerHTML = '';\n\n     fetchImages(query)\n        .then((data) => {\n            customLoader.style.display = 'none';\n            loadingMessage.style.display = 'none';\n            if(data.hits.length == 0) {\n                event.target.elements.searchfield.value = '';\n                iziToast.error({\n                    message: 'Sorry, there are no images mathcing your search query. Please try again!',\n                    position: 'topRight'\n                })\n                loadMoreBtn.style.display = 'none';\n            } else {\n                renderGallery(gallery, data.hits);\n                lightbox.refresh();\n                totalHits = data.totalHits;\n                loadedHits = data.hits.length;\n                loadMoreBtn.style.display = loadedHits < totalHits ? 'block' : 'none';\n            }\n        })\n        .catch(() => {\n            customLoader.style.display = 'none';\n            loadingMessage.style.display = 'none';\n            loadMoreBtn.style.display = 'none'\n            iziToast.error({\n                message: 'Something went wrong. Please try again later.',\n                position: 'topRight'\n            });\n        });\n})\n\n\nloadMoreBtn.addEventListener(\"click\", async() => {\n    event.preventDefault();\n    loadMoreBtn.style.display = 'none';\n    customLoader.style.display = 'block';\n\n    try {\n        const data = await fetchImages(lastQuery);\n        customLoader.style.display = 'none';\n        addPage(gallery, data.hits);\n        lightbox.refresh();\n        loadedHits += data.hits.length;\n        loadMoreBtn.style.display = loadedHits < totalHits ? 'block' : 'none';\n        if(loadedHits == totalHits){\n            iziToast.info({\n                message: 'We are sorry, but you have reached the end of search results.',\n                position: 'topRight'\n            })\n        }\n\n        const firstCard = gallery.querySelector('.card');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth'\n            });\n        }\n        \n    } catch (error) {\n        loadMoreBtn.style.display = 'none';\n        customLoader.style.display = 'none';\n        iziToast.error({\n            message: 'Something went wrong. Please try again later.',\n            position: 'topRight'\n        });\n    }\n})\n\n\n"],"names":["lightbox","SimpleLightbox","token","lastQuery","page","fetchImages","query","axios","response","createImageCard","hit","renderGallery","galleryElement","hits","createCards","addPage","form","customLoader","loadMoreBtn","gallery","loadingMessage","totalHits","loadedHits","event","iziToast","data","firstCard","cardHeight"],"mappings":"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"}